<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SM-Genie - Social Media Manager</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div id="app">
        <!-- Loading Screen -->
        <div id="loading" class="loading-screen">
            <div class="loading-spinner"></div>
            <p>Loading...</p>
        </div>

        <!-- Login Screen -->
        <div id="login-screen" class="screen hidden">
            <div class="login-container">
                <div class="login-card">
                    <div class="logo">
                        <i class="fas fa-magic"></i>
                        <h1>SM-Genie</h1>
                    </div>
                    <p class="subtitle">Sign in with Google to manage your social media accounts</p>
                    <button id="login-btn" class="btn btn-primary">
                        <i class="fab fa-google"></i>
                        Sign in with Google
                    </button>
                    <div class="features">
                        <div class="feature">
                            <i class="fas fa-shield-alt"></i>
                            <span>Secure Google Authentication</span>
                        </div>
                        <div class="feature">
                            <i class="fab fa-twitter"></i>
                            <span>Connect X & Instagram</span>
                        </div>
                        <div class="feature">
                            <i class="fas fa-lock"></i>
                            <span>Your Data Stays Private</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Link Accounts Screen -->
        <div id="link-accounts-screen" class="screen hidden">
            <div class="link-accounts-container">
                <div class="link-accounts-header">
                    <div class="logo">
                        <i class="fas fa-magic"></i>
                        <h1>SM-Genie</h1>
                    </div>
                    <p class="subtitle">Connect your social media accounts to get started</p>
                    <div class="user-info-header">
                        <img id="user-avatar-link" src="" alt="User Avatar" class="user-avatar-small">
                        <span id="user-name-link">Welcome!</span>
                    </div>
                </div>

                <div class="accounts-grid">
                    <!-- X (Twitter) Box -->
                    <div class="account-box twitter-box">
                        <div class="account-box-header">
                            <i class="fab fa-twitter"></i>
                            <h2>X (Twitter)</h2>
                        </div>
                        <p class="account-description">Connect your X account to post tweets and images</p>
                        <div class="account-features">
                            <div class="mini-feature"><i class="fas fa-check"></i> Post tweets</div>
                            <div class="mini-feature"><i class="fas fa-check"></i> Upload images</div>
                            <div class="mini-feature"><i class="fas fa-check"></i> View history</div>
                        </div>
                        <button id="link-twitter-btn" class="btn btn-twitter">
                            <i class="fab fa-twitter"></i>
                            Connect X Account
                        </button>
                        <div id="twitter-connected" class="connected-status hidden">
                            <i class="fas fa-check-circle"></i>
                            <span>Connected as <strong id="twitter-username"></strong></span>
                        </div>
                    </div>

                    <!-- Instagram Box -->
                    <div class="account-box instagram-box">
                        <div class="account-box-header">
                            <i class="fab fa-instagram"></i>
                            <h2>Instagram</h2>
                        </div>
                        <p class="account-description">Connect via Facebook to post photos and manage your Instagram</p>
                        <div class="account-features">
                            <div class="mini-feature"><i class="fas fa-check"></i> Post photos</div>
                            <div class="mini-feature"><i class="fas fa-check"></i> Add captions</div>
                            <div class="mini-feature"><i class="fas fa-check"></i> Track engagement</div>
                        </div>
                        
                        <!-- Facebook Login for Instagram (Recommended) -->
                        <button id="link-facebook-btn" class="btn btn-facebook">
                            <i class="fab fa-facebook"></i>
                            Connect via Facebook
                        </button>
                        
                        <!-- Manual Token Input Option (Alternative) -->
                        <div id="instagram-token-form" class="token-form hidden">
                            <label for="instagram-access-token">Or use manual token:</label>
                            <input 
                                type="text" 
                                id="instagram-access-token" 
                                placeholder="Paste your Instagram access token here"
                                class="token-input"
                            />
                            <button id="connect-instagram-token-btn" class="btn btn-instagram" type="button">
                                <i class="fab fa-instagram"></i>
                                Connect with Token
                            </button>
                            <a href="https://developers.facebook.com/docs/instagram-basic-display-api/overview#instagram-user-access-tokens" target="_blank" class="help-link">
                                <i class="fas fa-question-circle"></i> How to get an access token?
                            </a>
                        </div>
                        
                        <button id="toggle-manual-token-btn" class="btn btn-link-small">
                            <i class="fas fa-key"></i> Use manual token instead
                        </button>
                        
                        <div id="facebook-connected" class="connected-status hidden">
                            <i class="fas fa-check-circle"></i>
                            <span>Connected as <strong id="facebook-username"></strong></span>
                            <div id="instagram-accounts-list" class="instagram-list"></div>
                        </div>
                        
                        <div id="instagram-connected" class="connected-status hidden">
                            <i class="fas fa-check-circle"></i>
                            <span>Connected as <strong id="instagram-username"></strong></span>
                        </div>
                    </div>
                </div>

                <div class="link-accounts-footer">
                    <button id="continue-to-dashboard-btn" class="btn btn-primary">
                        <i class="fas fa-arrow-right"></i>
                        Continue to Dashboard
                    </button>
                    <button id="switch-account-btn" class="btn btn-link">
                        <i class="fas fa-user-circle"></i>
                        Sign in with different account
                    </button>
                </div>
            </div>
        </div>

        <!-- Dashboard Screen -->
        <div id="dashboard-screen" class="screen hidden">
            <header class="header">
                <div class="header-content">
                    <div class="logo-header">
                        <i class="fas fa-magic"></i>
                        <h2>SM-Genie</h2>
                    </div>
                    <div class="user-info">
                        <img id="header-user-avatar" src="" alt="User Avatar" class="header-avatar">
                        <div class="user-details">
                            <span id="user-name">Welcome!</span>
                            <div class="social-status">
                                <span id="twitter-status" class="social-badge">
                                    <i class="fab fa-twitter"></i> Not connected
                                </span>
                                <span id="instagram-status" class="social-badge">
                                    <i class="fab fa-instagram"></i> Not connected
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="header-actions">
                        <button id="manage-accounts-btn" class="btn btn-secondary">
                            <i class="fas fa-cog"></i>
                            Manage Accounts
                        </button>
                        <button id="logout-btn" class="btn btn-secondary">
                            <i class="fas fa-sign-out-alt"></i>
                            Logout
                        </button>
                    </div>
                </div>
            </header>

            <main class="main-content">
                <div class="container">
                    <!-- AI Content Generator -->
                    <div class="post-form-container">
                        <div class="post-form ai-generator">
                            <h2><i class="fas fa-magic"></i> AI Content Generator</h2>
                            <p class="subtitle-small">Generate images and captions with AI</p>
                            
                            <div class="form-group">
                                <label for="ai-prompt">Describe what you want to create</label>
                                <textarea 
                                    id="ai-prompt" 
                                    placeholder="Example: A serene sunset over mountains with vibrant colors"
                                    rows="3"
                                ></textarea>
                            </div>

                            <div class="form-group">
                                <label for="caption-length">Caption Length (words)</label>
                                <input 
                                    type="number" 
                                    id="caption-length" 
                                    value="30" 
                                    min="10" 
                                    max="100"
                                    placeholder="Maximum words for caption"
                                />
                            </div>

                            <button type="button" id="generate-btn" class="btn btn-primary">
                                <i class="fas fa-wand-magic-sparkles"></i>
                                Generate Content
                            </button>

                            <!-- Preview Section -->
                            <div id="ai-preview" class="ai-preview hidden">
                                <h3>Preview Generated Content</h3>
                                <div class="preview-content">
                                    <img id="ai-generated-image" src="" alt="Generated content">
                                    <div class="preview-caption">
                                        <h4>Caption:</h4>
                                        <p id="ai-generated-caption"></p>
                                    </div>
                                </div>
                                <div class="preview-actions">
                                    <button type="button" id="post-to-twitter-btn" class="btn btn-twitter">
                                        <i class="fab fa-twitter"></i>
                                        Post to X
                                    </button>
                                    <button type="button" id="post-to-instagram-btn" class="btn btn-instagram">
                                        <i class="fab fa-instagram"></i>
                                        Post to Instagram
                                    </button>
                                    <button type="button" id="regenerate-btn" class="btn btn-secondary">
                                        <i class="fas fa-redo"></i>
                                        Regenerate
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Manual Post Creation Form -->
                    <div class="post-form-container">
                        <div class="post-form">
                            <h2>Create Manual Post</h2>
                            <form id="post-form">
                                <div class="form-group">
                                    <label for="tweet-text">What's happening?</label>
                                    <textarea 
                                        id="tweet-text" 
                                        placeholder="Share your thoughts..." 
                                        maxlength="280"
                                        rows="4"
                                    ></textarea>
                                    <div class="char-count">
                                        <span id="char-count">0</span>/280
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="image-upload">Add Image (Optional)</label>
                                    <div class="file-upload">
                                        <input type="file" id="image-upload" accept="image/*" />
                                        <label for="image-upload" class="file-upload-label">
                                            <i class="fas fa-cloud-upload-alt"></i>
                                            <span>Choose Image</span>
                                        </label>
                                    </div>
                                    <div id="image-preview" class="image-preview hidden">
                                        <img id="preview-img" src="" alt="Preview">
                                        <button type="button" id="remove-image" class="remove-image">
                                            <i class="fas fa-times"></i>
                                        </button>
                                    </div>
                                </div>

                                <button type="submit" id="post-btn" class="btn btn-primary" disabled>
                                    <i class="fab fa-twitter"></i>
                                    Post Tweet
                                </button>
                            </form>
                        </div>
                    </div>

                    <!-- Recent Tweets -->
                    <div class="tweets-container">
                        <h2>Your Recent Tweets</h2>
                        <div id="tweets-list" class="tweets-list">
                            <div class="loading-tweets">
                                <i class="fas fa-spinner fa-spin"></i>
                                <span>Loading tweets...</span>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>

        <!-- Success Modal -->
        <div id="success-modal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <i class="fas fa-check-circle success-icon"></i>
                    <h3>Success!</h3>
                </div>
                <div class="modal-body">
                    <p>Your tweet has been posted successfully!</p>
                </div>
                <div class="modal-footer">
                    <button id="close-success" class="btn btn-primary">OK</button>
                </div>
            </div>
        </div>

        <!-- Error Modal -->
        <div id="error-modal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <i class="fas fa-exclamation-circle error-icon"></i>
                    <h3>Error</h3>
                </div>
                <div class="modal-body">
                    <p id="error-message">Something went wrong. Please try again.</p>
                </div>
                <div class="modal-footer">
                    <button id="close-error" class="btn btn-primary">OK</button>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
